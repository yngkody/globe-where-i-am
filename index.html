<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Interactive Map - Neon Arcade</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    html, body {
      height: 100%;
      margin: 0;
      padding: 0;
      background: #111;
      font-family: monospace;
      color: #fff;
    }
    #map {
      height: 100%;
      width: 100%;
    }

    /* ===== Neon Button ===== */
    #go-ny {
      position: absolute;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      z-index: 10;
      padding: 12px 24px;
      font-size: 22px;
      color: #00ffff;
      background: #000;
      border: 3px solid #00ffff;
      border-radius: 12px;
      cursor: pointer;
      text-shadow: 0 0 8px #ff00ff, 0 0 14px #00ffff;
      transition: 0.3s;
    }
    #go-ny:hover {
      background: #00ffff;
      color: #000;
      text-shadow: 0 0 18px #ff00ff, 0 0 24px #00ffff;
    }

    /* ===== Neon Info Windows ===== */
    .info-window {
      font-size: 15px;
      font-weight: bold;
      padding: 10px 14px;
      border-radius: 10px;
      background: rgba(0,0,0,0.9);
      color: #fff; /* fixed */
      text-shadow: 0 0 6px #ff00ff, 0 0 10px #00ffff;
      border: 2px solid #ff00ff;
      box-shadow: 0 0 15px #00ffff, 0 0 25px #ff00ff;
    }

    /* ===== Animated Neon Marker Base ===== */
    .neon-marker {
      position: absolute;
      transform: translate(-50%, -50%);
      width: 28px;
      height: 28px;
      border-radius: 50%;
      background: radial-gradient(circle, #fff 0%, currentColor 40%, transparent 70%);
      cursor: pointer;
    }
    .neon-marker::before {
      content: "";
      position: absolute;
      top: 50%;
      left: 50%;
      width: 60px;
      height: 60px;
      border: 2px solid currentColor;
      border-radius: 50%;
      transform: translate(-50%, -50%);
      animation: pulse 2s infinite;
      opacity: 0.6;
    }

    /* ===== Neon Label ===== */
    .neon-label {
      position: absolute;
      transform: translate(-50%, -150%);
      font-size: 12px;
      font-weight: bold;
      color: #fff;
      text-shadow: 0 0 6px #ff00ff, 0 0 12px #00ffff;
      pointer-events: none; /* so clicks still hit the marker */
    }

    /* ===== Color Variants ===== */
    .red   { color: #ff3333; box-shadow: 0 0 20px #ff3333, 0 0 40px #ff7777; }
    .orange{ color: #ffaa33; box-shadow: 0 0 20px #ffaa33, 0 0 40px #ffcc77; }
    .green { color: #33ff77; box-shadow: 0 0 20px #33ff77, 0 0 40px #77ffaa; }
    .blue  { color: #3399ff; box-shadow: 0 0 20px #3399ff, 0 0 40px #77ccff; }

    @keyframes pulse {
      0% { transform: translate(-50%, -50%) scale(0.6); opacity: 0.7; }
      50% { transform: translate(-50%, -50%) scale(1.3); opacity: 0.2; }
      100% { transform: translate(-50%, -50%) scale(0.6); opacity: 0.7; }
    }
  </style>
</head>
<body>
  <button id="go-ny">Go to NY</button>
  <div id="map"></div>

  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCc_ZIOU8nyAs6EitoIcpLQ9RBRRkegAiQ&callback=initMap" async defer></script>
  <script>
    function initMap() {
      const map = new google.maps.Map(document.getElementById("map"), {
        zoom: 7,
        center: { lat: 32.3547, lng: -89.3985 },
        disableDefaultUI: true,
        styles: [
          { elementType: 'geometry', stylers: [{ color: '#111' }] },
          { elementType: 'labels.text.fill', stylers: [{ color: '#fff' }] },
          { elementType: 'labels.text.stroke', stylers: [{ color: '#000' }] },
          { featureType: 'water', elementType: 'geometry', stylers: [{ color: '#000' }] },
          { featureType: 'road', elementType: 'geometry', stylers: [{ color: '#333' }] },
          { featureType: 'poi', elementType: 'geometry', stylers: [{ color: '#222' }] },
          { featureType: 'landscape', elementType: 'geometry', stylers: [{ color: '#1a1a1a' }] }
        ]
      });

      const locations = [
        { name: 'Gulfport High', lat: 30.3928, lng: -89.0284, url: 'https://www.yngkody.com/gulfport-high', colorClass: 'red' },
        { name: 'USM Gulf Park', lat: 30.3473, lng: -89.1640, url: 'https://www.yngkody.com/usm-gulf-park', colorClass: 'orange' },
        { name: 'NASA Stennis Space Center', lat: 30.3800, lng: -89.6044, url: 'https://www.yngkody.com/nasa-stennis', colorClass: 'green' },
        { name: 'Harlem, NY', lat: 40.8116, lng: -73.9465, url: 'https://www.yngkody.com/harlem-ny', colorClass: 'blue' }
      ];

      const msBounds = new google.maps.LatLngBounds();

      class NeonMarker extends google.maps.OverlayView {
        constructor(position, map, name, url, colorClass) {
          super();
          this.position = position;
          this.map = map;
          this.name = name;
          this.url = url;
          this.colorClass = colorClass;
          this.div = null;
          this.setMap(map);
        }
        onAdd() {
          this.div = document.createElement("div");
          this.div.className = "neon-marker " + this.colorClass;

          // Create a label element
          this.label = document.createElement("div");
          this.label.className = "neon-label";
          this.label.innerText = "Click Here";

          // Wrap marker + label together
          const container = document.createElement("div");
          container.style.position = "absolute";
          container.appendChild(this.div);
          container.appendChild(this.label);
          this.container = container;

          // Marker click
          this.div.addEventListener("click", () => {
            map.panTo(this.position);
            map.setZoom(12);
            setTimeout(() => window.open(this.url, "_blank"), 600);
          });

          const panes = this.getPanes();
          panes.overlayMouseTarget.appendChild(container);
        }
        draw() {
          const overlayProjection = this.getProjection();
          const pos = overlayProjection.fromLatLngToDivPixel(this.position);
          if (pos && this.container) {
            this.container.style.left = pos.x + "px";
            this.container.style.top = pos.y + "px";
          }
        }
        onRemove() {
          if (this.container) {
            this.container.parentNode.removeChild(this.container);
            this.container = null;
          }
        }
      }

      locations.forEach(loc => {
        new NeonMarker(
          new google.maps.LatLng(loc.lat, loc.lng),
          map,
          loc.name,
          loc.url,
          loc.colorClass
        );
        if (loc.name !== "Harlem, NY") {
          msBounds.extend({ lat: loc.lat, lng: loc.lng });
        }
      });

      map.fitBounds(msBounds);

      // Zoom to NY function
      function zoomToNY() {
        const nyPos = { lat: 40.8116, lng: -73.9465 };
        map.panTo(nyPos);
        map.setZoom(12);
      }

      if (window.location.hash === "#NY") zoomToNY();
      document.getElementById("go-ny").addEventListener("click", () => {
        window.location.hash = "#NY";
        zoomToNY();
      });
    }
  </script>
</body>
</html>
